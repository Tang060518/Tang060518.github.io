<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é“œå®˜çª‘çº¹æ ·æ•°æ®åº“</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #8B4513, #A0522D);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        h1 {
            margin: 0;
            font-size: 2.5em;
        }
        
        .subtitle {
            margin-top: 10px;
            opacity: 0.9;
        }
        
        .search-section {
            padding: 20px;
            background-color: #f9f9f9;
            border-bottom: 1px solid #eee;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        input[type="text"] {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        
        button {
            padding: 12px 20px;
            background-color: #8B4513;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover {
            background-color: #A0522D;
        }
        
        .filters {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        /* æ–°å¢ï¼šä¸Šä¼ åŒºåŸŸæ ·å¼ */
        .upload-section {
            padding: 20px;
            background-color: #fff8e1;
            border-bottom: 1px solid #ffd54f;
            text-align: center;
        }

        .upload-area {
            display: inline-block;
            padding: 15px 25px;
            background-color: #ffecb3;
            border: 2px dashed #ffb300;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .upload-area:hover {
            background-color: #ffe082;
        }

        .upload-input {
            display: none;
        }

        .items-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            padding: 30px;
        }
        
        .item-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease;
            position: relative;
        }
        
        .item-card:hover {
            transform: translateY(-5px);
        }

        /* æ–°å¢ï¼šç¼–è¾‘æŒ‰é’® */
        .edit-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(139, 69, 19, 0.8);
            color: white;
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            font-size: 14px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .item-card:hover .edit-btn {
            opacity: 1;
        }

        .item-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background-color: #eaeaea;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: #8B4513;
            position: relative;
        }

        .item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .item-info {
            padding: 15px;
        }
        
        .item-title {
            font-size: 1.2em;
            font-weight: bold;
            margin: 0 0 8px 0;
            color: #333;
        }
        
        .item-description {
            font-size: 0.9em;
            color: #666;
            line-height: 1.4;
            margin: 0 0 10px 0;
        }
        
        .item-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            color: #888;
        }
        
        .pattern-category {
            background-color: #e3f2fd;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-top: 5px;
        }
        
        .pattern-list {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #ddd;
        }
        
        .pattern-item {
            display: inline-block;
            background-color: #f5f5f5;
            padding: 3px 8px;
            margin: 2px;
            border-radius: 12px;
            font-size: 0.8em;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background-color: #333;
            color: white;
            margin-top: 30px;
        }
        
        @media (max-width: 768px) {
            .items-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>é“œå®˜çª‘çº¹æ ·æ•°æ®åº“</h1>
            <p class="subtitle">åŸºäºé»‘çŸ³å·æ²‰èˆ¹ä¸é•¿æ²™çª‘å€å‡ºåœŸå™¨ç‰©çº¹æ ·åˆ†ç±»ç³»ç»Ÿ</p>
        </header>

        <!-- æ–°å¢ï¼šä¸Šä¼ åŒºåŸŸ -->
        <section class="upload-section">
            <label class="upload-area" for="globalImageUpload">
                ğŸ“· ç‚¹å‡»æ­¤å¤„ä¸Šä¼ å…¨å±€é»˜è®¤å›¾ç‰‡ï¼ˆç”¨äºæ‰€æœ‰æ— å›¾é¡¹ï¼‰
            </label>
            <input type="file" id="globalImageUpload" class="upload-input" accept="image/*">
        </section>
        
        <section class="search-section">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="æœç´¢çº¹æ ·åç§°æˆ–æè¿°...">
                <button onclick="searchItems()">æœç´¢</button>
            </div>
            
            <div class="filters">
                <select id="typeFilter" onchange="filterItems()">
                    <option value="">å…¨éƒ¨ç±»å‹</option>
                    <option value="textPatterns">æ–‡å­—çº¹æ ·</option>
                    <option value="moldAppliquÃ©Patterns">æ¨¡å°è´´èŠ±çº¹æ ·</option>
                    <option value="animalPatterns">åŠ¨ç‰©çº¹æ ·</option>
                    <option value="plantPatterns">æ¤ç‰©çº¹æ ·</option>
                    <option value="figurePatterns">äººç‰©çº¹æ ·</option>
                </select>
                
                <select id="periodFilter" onchange="filterItems()">
                    <option value="">å…¨éƒ¨æ—¶æœŸ</option>
                    <option value="å”ä»£">å”ä»£</option>
                    <option value="äº”ä»£">äº”ä»£</option>
                    <option value="å®‹ä»£">å®‹ä»£</option>
                </select>
            </div>
        </section>
        
        <main>
            <div class="items-grid" id="itemsGrid">
                <!-- é“œå®˜çª‘çº¹æ ·å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </main>
    </div>
    
    <footer>
        <p>é“œå®˜çª‘çº¹æ ·æ•°æ®åº“ Â© 2023 | è®°å½•åƒå¹´é™¶ç“·æ–‡åŒ–</p>
    </footer>

    <script>
        // é»‘çŸ³å·æ²‰èˆ¹ä¸é•¿æ²™çª‘å€å‡ºåœŸå™¨ç‰©çº¹æ ·åˆ†ç±»ä»£ç 
        var blackStoneShipPatterns = {
          textPatterns: ["é˜¿æ‹‰ä¼¯æ–‡"],
          moldAppliquÃ©Patterns: ["æ¨¡å°è´´èŠ±æ¤°æ£çº¹", "å°è´´èŠ±å¯¹é¸Ÿçº¹"],
          animalPatterns: ["å¥”ç‹®çº¹", "è¹²ç‹®çº¹", "é¾™çº¹", "é£é¸Ÿçº¹", "åŒé±¼çº¹", "æ‘©ç¾¯çº¹", "å¯¹é¸Ÿæ¤°æ£çº¹", "é¸Ÿæ­‡è²å¶çº¹"],
          plantPatterns: ["æ¤°æ£çº¹", "å›¢èŠ±çº¹", "è²èŠ±çº¹", "æŠ˜æèŠ±å‰çº¹", "è¤ç»¿å½©èŠ±è‰çº¹", "çº¢å½©èŠ±è‰çº¹"],
          figurePatterns: ["æ‰“é©¬çƒäººç‰©çº¹", "èƒ¡äººéª‘è±¡çº¹", "èƒ¡äººå¥ä¹çº¹", "èƒ¡æ—‹èˆçº¹", "èƒ¡äººçº¹", "ç«¥å­åè²çº¹"]
        };

        // æ„å»ºçº¹æ ·æ•°æ®åº“
        var itemsData = [];
        var idCounter = 1;
        var categories = ['textPatterns', 'moldAppliquÃ©Patterns', 'animalPatterns', 'plantPatterns', 'figurePatterns'];
        var globalDefaultImageUrl = '';

        function getPatternDescription(pattern) {
          var descriptions = {
            "é˜¿æ‹‰ä¼¯æ–‡": "å”ä»£é“œå®˜çª‘å™¨ç‰©ä¸Šçš„é˜¿æ‹‰ä¼¯æ–‡å­—è£…é¥°ï¼Œåæ˜ äº†å½“æ—¶å¯¹å¤–è´¸æ˜“çš„ç¹è£",
            "æ¨¡å°è´´èŠ±æ¤°æ£çº¹": "ä½¿ç”¨æ¨¡å°å·¥è‰ºåˆ¶ä½œçš„æ¤°æ£çº¹æ ·ï¼Œä½“ç°äº†ä¸­å¤–æ–‡åŒ–äº¤æµçš„ç‰¹è‰²",
            "å°è´´èŠ±å¯¹é¸Ÿçº¹": "å¯¹ç§°çš„é¸Ÿç±»çº¹æ ·ï¼Œå¸¸è§äºå”ä»£é“œå®˜çª‘ç“·å™¨è£…é¥°",
            "å¥”ç‹®çº¹": "åŠ¨æ€çš„ç‹®å­çº¹æ ·ï¼Œå±•ç°å”ä»£å·¥è‰ºç¾æœ¯çš„ç”ŸåŠ¨æ€§",
            "è¹²ç‹®çº¹": "é™æ€çš„ç‹®å­çº¹æ ·ï¼Œè±¡å¾å¨ä¸¥ä¸åŠ›é‡",
            "é¾™çº¹": "ä¸­å›½ä¼ ç»Ÿçº¹æ ·ï¼Œå”ä»£ç“·å™¨ä¸Šçš„é¾™çº¹å…·æœ‰ç‹¬ç‰¹é£æ ¼",
            "é£é¸Ÿçº¹": "é£ç¿”çš„é¸Ÿç±»çº¹æ ·ï¼Œçº¿æ¡æµç•…è‡ªç„¶",
            "åŒé±¼çº¹": "æˆå¯¹çš„é±¼ç±»çº¹æ ·ï¼Œå¯“æ„å‰ç¥¥å¦‚æ„",
            "æ‘©ç¾¯çº¹": "æºè‡ªå°åº¦ç¥è¯çš„ç¥å…½çº¹æ ·ï¼Œå”ä»£å¹¿æ³›æµè¡Œ",
            "å¯¹é¸Ÿæ¤°æ£çº¹": "ç»“åˆé¸Ÿç±»ä¸æ¤°æ£çš„å¤åˆçº¹æ ·ï¼Œä½“ç°å¤šå…ƒæ–‡åŒ–èåˆ",
            "é¸Ÿæ­‡è²å¶çº¹": "é¸Ÿç±»æ –æ¯äºè²å¶çš„çº¹æ ·ï¼Œæ„å¢ƒä¼˜ç¾",
            "æ¤°æ£çº¹": "æ¨¡ä»¿æ¤°æ£æœå®çš„æ¤ç‰©çº¹æ ·ï¼Œå…·æœ‰å¼‚åŸŸé£æƒ…",
            "å›¢èŠ±çº¹": "å›¢çŠ¶èŠ±å‰çº¹æ ·ï¼Œå”ä»£å¸¸è§çš„è£…é¥°å›¾æ¡ˆ",
            "è²èŠ±çº¹": "ä½›æ•™æ–‡åŒ–å½±å“ä¸‹çš„è²èŠ±çº¹æ ·ï¼Œå¯“æ„æ¸…å‡€é«˜é›…",
            "æŠ˜æèŠ±å‰çº¹": "æŠ˜æèŠ±å‰çº¹æ ·ï¼Œè¡¨ç°è‡ªç„¶ä¹‹ç¾",
            "è¤ç»¿å½©èŠ±è‰çº¹": "ä½¿ç”¨è¤ç»¿å½©ç»˜åˆ¶çš„èŠ±è‰çº¹æ ·ï¼Œè‰²å½©ä¸°å¯Œ",
            "çº¢å½©èŠ±è‰çº¹": "ä½¿ç”¨çº¢å½©ç»˜åˆ¶çš„èŠ±è‰çº¹æ ·ï¼Œé²œè‰³å¤ºç›®",
            "æ‰“é©¬çƒäººç‰©çº¹": "æç»˜é©¬çƒè¿åŠ¨çš„äººç‰©çº¹æ ·ï¼Œåæ˜ å”ä»£ä½“è‚²æ´»åŠ¨",
            "èƒ¡äººéª‘è±¡çº¹": "èƒ¡äººéª‘è±¡çš„å¤åˆçº¹æ ·ï¼Œå±•ç°ä¸­å¤–æ–‡åŒ–äº¤æµ",
            "èƒ¡äººå¥ä¹çº¹": "èƒ¡äººæ¼”å¥ä¹å™¨çš„çº¹æ ·ï¼Œä½“ç°å”ä»£éŸ³ä¹æ–‡åŒ–",
            "èƒ¡æ—‹èˆçº¹": "èƒ¡äººè¡¨æ¼”èƒ¡æ—‹èˆçš„çº¹æ ·ï¼Œåæ˜ å”ä»£èˆè¹ˆè‰ºæœ¯",
            "èƒ¡äººçº¹": "èƒ¡äººå½¢è±¡çº¹æ ·ï¼Œåæ˜ å”ä»£å¤šå…ƒæ–‡åŒ–",
            "ç«¥å­åè²çº¹": "ç«¥å­åäºè²èŠ±çš„çº¹æ ·ï¼Œå¯“æ„å‰ç¥¥ç¾å¥½"
          };
          return descriptions[pattern] || "å”ä»£é“œå®˜çª‘ç»å…¸çº¹æ ·";
        }

        function getCategoryDisplayName(category) {
          var names = {
            "textPatterns": "æ–‡å­—çº¹æ ·",
            "moldAppliquÃ©Patterns": "æ¨¡å°è´´èŠ±çº¹æ ·",
            "animalPatterns": "åŠ¨ç‰©çº¹æ ·",
            "plantPatterns": "æ¤ç‰©çº¹æ ·",
            "figurePatterns": "äººç‰©çº¹æ ·"
          };
          return names[category] || "çº¹æ ·";
        }

        // åˆå§‹åŒ–æ•°æ®
        for (var i = 0; i < categories.length; i++) {
          var category = categories[i];
          var patterns = blackStoneShipPatterns[category];
          var categoryName = getCategoryDisplayName(category);
          
          for (var j = 0; j < patterns.length; j++) {
            var pattern = patterns[j];
            itemsData.push({
              id: idCounter++,
              title: pattern,
              description: getPatternDescription(pattern),
              type: categoryName,
              period: "å”ä»£",
              dimensions: "ä¸è¯¦",
              location: "é»‘çŸ³å·æ²‰èˆ¹/é•¿æ²™çª‘å€å‡ºåœŸ",
              image_url: "", // åˆå§‹ä¸ºç©º
              category: category
            });
          }
        }

        // æ¸²æŸ“çº¹æ ·å¡ç‰‡
        function renderItems(items) {
            var grid = document.getElementById('itemsGrid');
            grid.innerHTML = '';
            
            for (var i = 0; i < items.length; i++) {
                var item = items[i];
                var card = document.createElement('div');
                card.className = 'item-card';
                card.dataset.id = item.id;
                
                var imageDiv = document.createElement('div');
                imageDiv.className = 'item-image';

                // æ˜¾ç¤ºå›¾ç‰‡æˆ–å ä½ç¬¦
                if (item.image_url) {
                    var img = document.createElement('img');
                    img.src = item.image_url;
                    img.alt = item.title;
                    imageDiv.appendChild(img);
                } else if (globalDefaultImageUrl) {
                    var img = document.createElement('img');
                    img.src = globalDefaultImageUrl;
                    img.alt = "é»˜è®¤å›¾ç‰‡";
                    imageDiv.appendChild(img);
                } else {
                    imageDiv.textContent = 'ğŸº';
                    imageDiv.style.fontSize = '48px';
                    imageDiv.style.color = '#8B4513';
                    imageDiv.style.backgroundColor = '#f0f0f0';
                }

                // ç¼–è¾‘æŒ‰é’®
                var editBtn = document.createElement('button');
                editBtn.className = 'edit-btn';
                editBtn.textContent = 'âœï¸';
                editBtn.onclick = function(e) {
                    e.stopPropagation();
                    var cardId = this.closest('.item-card').dataset.id;
                    uploadImageForItem(cardId);
                };
                imageDiv.appendChild(editBtn);
                
                var infoDiv = document.createElement('div');
                infoDiv.className = 'item-info';
                
                var title = document.createElement('h3');
                title.className = 'item-title';
                title.textContent = item.title;
                
                var desc = document.createElement('p');
                desc.className = 'item-description';
                desc.textContent = item.description;
                
                var details = document.createElement('div');
                details.className = 'item-details';
                details.innerHTML = `<span>${item.period}</span><span>${item.dimensions}</span>`;
                
                var categoryLabel = document.createElement('div');
                categoryLabel.className = 'pattern-category';
                categoryLabel.textContent = item.type;
                
                var patternList = document.createElement('div');
                patternList.className = 'pattern-list';
                patternList.innerHTML = '<strong>çº¹æ ·:</strong> ';
                var patternItem = document.createElement('span');
                patternItem.className = 'pattern-item';
                patternItem.textContent = item.title;
                patternList.appendChild(patternItem);
                
                infoDiv.appendChild(title);
                infoDiv.appendChild(desc);
                infoDiv.appendChild(details);
                infoDiv.appendChild(categoryLabel);
                infoDiv.appendChild(patternList);
                
                card.appendChild(imageDiv);
                card.appendChild(infoDiv);
                grid.appendChild(card);
            }
        }

        // ä¸ºæŒ‡å®šæ¡ç›®ä¸Šä¼ å›¾ç‰‡
        function uploadImageForItem(itemId) {
            var input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                var file = e.target.files[0];
                if (!file) return;
                var reader = new FileReader();
                reader.onload = function(event) {
                    var url = event.target.result;
                    // æ›´æ–°æ•°æ®
                    for (var i = 0; i < itemsData.length; i++) {
                        if (itemsData[i].id == itemId) {
                            itemsData[i].image_url = url;
                            break;
                        }
                    }
                    searchItems(); // é‡æ–°æ¸²æŸ“
                };
                reader.readAsDataURL(file);
            };
            input.click();
        }

        // å…¨å±€é»˜è®¤å›¾ç‰‡ä¸Šä¼ 
        document.getElementById('globalImageUpload').addEventListener('change', function(e) {
            var file = e.target.files[0];
            if (!file) return;
            var reader = new FileReader();
            reader.onload = function(event) {
                globalDefaultImageUrl = event.target.result;
                searchItems(); // é‡æ–°æ¸²æŸ“æ‰€æœ‰å¡ç‰‡
            };
            reader.readAsDataURL(file);
        });

        // æœç´¢ä¸è¿‡æ»¤
        function searchItems() {
            var searchTerm = document.getElementById('searchInput').value.toLowerCase();
            var typeFilter = document.getElementById('typeFilter').value;
            var periodFilter = document.getElementById('periodFilter').value;
            
            var filtered = [];
            for (var i = 0; i < itemsData.length; i++) {
                var item = itemsData[i];
                var matchesSearch = item.title.toLowerCase().includes(searchTerm) || 
                                    item.description.toLowerCase().includes(searchTerm);
                var matchesType = !typeFilter || item.category === typeFilter;
                var matchesPeriod = !periodFilter || item.period === periodFilter;
                
                if (matchesSearch && matchesType && matchesPeriod) {
                    filtered.push(item);
                }
            }
            renderItems(filtered);
        }

        function filterItems() {
            searchItems();
        }

        // é¡µé¢åŠ è½½
        document.addEventListener('DOMContentLoaded', function() {
            renderItems(itemsData);
            // å›è½¦æœç´¢
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') searchItems();
            });
        });
    </script>
</body>
</html>